
# Парсер и генератор html-каталога онлайн библиотеки

Проект состоит из двух частей. Первая — парсер раздела фантастики сайта 
[tululu.org/](https://tululu.org/l55/). Вторая — генератор html-каталога для удобного 
просмотра книг
## Пример сгенерированного каталога

![Webapp Screenshot](https://github.com/fdrov/books-library-restyle-3/raw/master/static/demo.png)

  
## Демо

Демо сайта можно посмотреть по ссылке [ссылке](https://fdrov.github.io/books-library-restyle-3/pages/index1.html)

## Скачать библиотеку

Выполните два шага ниже и получите удобный оффлайн каталог.


### 1.Спарсить данные
<details>
<summary>Cкрипт парсинга скачает нужное количество книг</summary>

Скрипт качает книги раздела **Научная фантастика** с сайта [tululu.org](https://tululu.org/).
Качает саму книгу, обложку и сохраняет мета-информацию в json. 

#### Как установить
Для запуска:
* должен быть установлени Python 3.8 и выше.
* библиотеки из файла requirements.txt
  

Скачайте репозиторий и разархивируйте все файлы.
Запустите командную строку и перейдите в папку с файлами.
Установите зависимости:

```bash
pip install -r requirements.txt
```

#### Как запустить скрипт

Ввести в командной строке 
```bash
python parse_tululu_category.py
```

#### Аргументы
* `--help` — вывод справки
* `--start_page` — начальная страница парсинга (по-умолчанию 1)
* `--end__page` — страница, перед которой остановить парсинг(если пропустить,
то спарсит все страницы)
* `--dest_folder` — путь к каталогу с результатами парсинга: картинкам,
книгам, JSON. (по-умолчанию папка ./static/)
* `--skip_imgs` — не скачивать картинки (параметр-флаг)
* `--skip_txt` — не скачивать книги (параметр-флаг)
* `--json_path` — указать свой путь к *.json файлу с результатами 
(по-умолчанию папка ./jsonfolder/)
  
#### Сохранение книги и обложки

Книги сохраняются в папку `books/`, а обложки в `images/` в папке расположения скрипта.

#### Сохранение мета-информации о книге

По окончании парсинга вся мета-информация по книгам сохраняется в `books.json`.
Пример:
```json
[
  {
    "title": "Алиби",
    "author": "ИВАНОВ Сергей",
    "img_src": "static/images/239.jpg",
    "book_path": "static/books/Алиби.txt",
    "comments": [
      "Детский вариант анекдотов про Шерлока Холмса)",
      "Загадки я люблю.)))",
      "А мне понравилось, люблю, знаете ли, всякие загадочки, головоломочки, кроссвордики, Гимнастика ума, одним словом... \nВо всём можно найти положительные моменты, не разгадал загадку, так хоть гренки научился готовить отменные... :-)",
      "Очень поучительное для ребенка 10 лет."
    ],
    "genres": [
      "Научная фантастика",
      "Прочие Детективы"
    ]
  },
  {
    …
  }
  ```
</details>

### 2. Сгенерировать html-каталог

<details>
  <summary>Скрипт сгенерирует удобный html-каталога для просмотра оффлайн.
Также, готовые html-файлы можно разместить на сервере.</summary>

Запускаем скрипт
```bash
python render_website.py
```

Скрипт на основе шаблона template.html сгенерирует в папке pages html-страницы 
с книгами. 

Чтобы пользоваться библиотекой — закройте скрипт и откройте index1.html 
в папке ./pages.
___
Если хотите редактировать шаблон библиотеки, то не закрывайте скрипт. Тогда он
будет отслеживать изменения в файле template.html.

По-умолчанию скрипт разбивает весь спаршенный каталог на страницы по 10 книг.
Обратите внимание на структуру тестовых папок. Она нужна для успешной работы
скрипта.

```shell
├───pages  # сгенерированные страницы index.html1, index.html2 и тд
├───src  # css и js файлы библиотеки bootstrap
├───static
│   ├───books  # файлы книг
│   ├───icons  # favicons
│   ├───images # обложки книг
│   └───jsonfolder # папка для файла с мета-информацией о книгах
```

</details>